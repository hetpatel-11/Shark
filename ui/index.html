<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shark Ops</title>
  <style>
    :root {
      --bg: #edf7ff;
      --bg-2: #dceeff;
      --panel: rgba(247, 252, 255, 0.88);
      --panel-strong: rgba(255, 255, 255, 0.97);
      --ink: #0d2436;
      --muted: #58748b;
      --line: rgba(63, 128, 170, 0.16);
      --accent: #4fb7ff;
      --accent-strong: #1187d9;
      --accent-soft: rgba(79, 183, 255, 0.1);
      --shadow: 0 22px 60px rgba(30, 103, 150, 0.12);
    }
    body {
      margin: 0;
      font-family: "Avenir Next", "Nunito Sans", "Helvetica Neue", sans-serif;
      color: var(--ink);
      background:
        radial-gradient(circle at top center, rgba(79, 183, 255, 0.22), transparent 28%),
        radial-gradient(circle at left 18%, rgba(255, 255, 255, 0.82), transparent 30%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 100%);
      min-height: 100vh;
    }
    main {
      max-width: 1260px;
      margin: 0 auto;
      padding: 22px;
    }
    .shell {
      background: rgba(242, 250, 255, 0.8);
      border: 1px solid var(--line);
      border-radius: 28px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      min-height: calc(100vh - 44px);
      overflow: hidden;
    }
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 18px 22px;
      border-bottom: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.54);
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .brand-mark {
      width: 48px;
      height: 48px;
      display: grid;
      place-items: center;
      border-radius: 16px;
      background: linear-gradient(160deg, rgba(255,255,255,0.98), rgba(227,244,255,0.9));
      border: 1px solid rgba(63, 128, 170, 0.14);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.92);
    }
    .brand-mark svg {
      width: 34px;
      height: 34px;
    }
    .brand h1,
    .panel-title {
      margin: 0;
      font-size: 18px;
      line-height: 1.1;
    }
    .brand p,
    .muted {
      margin: 0;
      color: var(--muted);
    }
    .capsule {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      background: var(--panel-strong);
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 10px 16px;
      box-shadow: 0 6px 20px rgba(30, 103, 150, 0.08);
      font-size: 14px;
    }
    .capsule strong {
      font-size: 22px;
      font-weight: 700;
      line-height: 1;
    }
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.35fr) minmax(300px, 0.65fr);
      min-height: calc(100vh - 121px);
    }
    .chat-panel {
      position: relative;
      border-right: 1px solid var(--line);
      padding: 22px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      min-height: 0;
    }
    .summary-card,
    .side-card,
    .composer {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 22px;
      box-shadow: 0 10px 30px rgba(30, 103, 150, 0.08);
      backdrop-filter: blur(12px);
    }
    .summary-card {
      padding: 18px 20px;
    }
    .summary-card h2 {
      margin: 6px 0 8px;
      font-size: 22px;
    }
    .status-row,
    .meta-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    .status-pill,
    .chip,
    .provider-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.01em;
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.72);
    }
    .status-pill::before,
    .provider-pill::before {
      content: "";
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #7c7c7c;
    }
    .status-pill.live::before,
    .provider-pill.ready::before {
      background: #36b37e;
      box-shadow: 0 0 0 4px rgba(54, 179, 126, 0.12);
    }
    .status-pill.idle::before,
    .provider-pill.blocked::before {
      background: var(--accent-strong);
      box-shadow: 0 0 0 4px rgba(217, 103, 103, 0.1);
    }
    .meta-grid {
      margin-top: 14px;
      color: var(--muted);
      font-size: 13px;
    }
    button {
      border: 0;
      border-radius: 999px;
      padding: 11px 15px;
      background: #103d60;
      color: white;
      font: inherit;
      cursor: pointer;
      transition: transform 160ms ease, opacity 160ms ease;
    }
    button:hover { transform: translateY(-1px); }
    button.secondary {
      background: rgba(255,255,255,0.86);
      color: var(--ink);
      border: 1px solid var(--line);
    }
    button.accent {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
    }
    .feed {
      min-height: 0;
      overflow: auto;
      padding-right: 6px;
      display: grid;
      gap: 14px;
      align-content: start;
    }
    .feed-entry {
      display: grid;
      gap: 8px;
    }
    .feed-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 12px;
      color: var(--muted);
    }
    .feed-card {
      background: var(--panel-strong);
      border: 1px solid rgba(63, 128, 170, 0.12);
      border-radius: 20px;
      padding: 14px 16px;
      box-shadow: 0 10px 24px rgba(30, 103, 150, 0.06);
    }
    .feed-card p {
      margin: 8px 0 0;
      line-height: 1.45;
      color: var(--ink);
    }
    .kind {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--accent-strong);
    }
    .kind::before {
      content: "";
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--accent);
    }
    .composer-wrap {
      position: sticky;
      bottom: 0;
      padding-top: 4px;
      background: linear-gradient(180deg, rgba(237,247,255,0) 0%, rgba(237,247,255,0.94) 24%);
    }
    .composer {
      padding: 14px;
    }
    .composer-label {
      margin: 0 0 10px;
      font-size: 13px;
      color: var(--muted);
    }
    .composer-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: end;
    }
    textarea {
      width: 100%;
      min-height: 72px;
      resize: vertical;
      padding: 14px 16px;
      border-radius: 18px;
      border: 1px solid var(--line);
      font: inherit;
      color: var(--ink);
      background: rgba(255,255,255,0.92);
      box-sizing: border-box;
    }
    .send {
      width: 54px;
      height: 54px;
      padding: 0;
      border-radius: 18px;
    }
    .side-panel {
      padding: 22px;
      display: grid;
      gap: 16px;
      align-content: start;
      background: rgba(255,255,255,0.24);
    }
    .side-card {
      padding: 18px;
    }
    .panel-title {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 12px;
    }
    .task-list,
    .provider-list {
      display: grid;
      gap: 10px;
    }
    .task-checklist {
      display: grid;
      gap: 10px;
    }
    .task-item {
      padding: 12px 13px;
      border-radius: 18px;
      border: 1px solid rgba(63, 128, 170, 0.12);
      background: rgba(255,255,255,0.78);
    }
    .task-item strong {
      display: block;
      font-size: 14px;
      margin-bottom: 6px;
    }
    .task-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 12px;
      color: var(--muted);
    }
    .task-item.check {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 10px;
      align-items: start;
    }
    .check-dot {
      width: 18px;
      height: 18px;
      margin-top: 2px;
      border-radius: 50%;
      border: 1.5px solid rgba(17, 135, 217, 0.22);
      background: rgba(255,255,255,0.9);
      display: grid;
      place-items: center;
      color: #1187d9;
      font-size: 11px;
      font-weight: 800;
    }
    .check-dot.done {
      background: rgba(17, 135, 217, 0.12);
      border-color: rgba(17, 135, 217, 0.18);
    }
    .check-label {
      font-size: 13px;
      line-height: 1.45;
    }
    .report-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      font-size: 13px;
    }
    .report-title strong {
      font-size: 14px;
    }
    .report-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(79, 183, 255, 0.12);
      color: var(--accent-strong);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }
    .report-badge.blocked {
      background: rgba(219, 87, 87, 0.1);
      color: #b74242;
    }
    .report-list {
      margin: 10px 0 0;
      padding: 0;
      display: grid;
      gap: 8px;
      list-style: none;
    }
    .report-list li {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 10px;
      align-items: start;
      font-size: 13px;
      line-height: 1.45;
      color: var(--ink);
    }
    .report-list li::before {
      content: "â€¢";
      color: var(--accent-strong);
      font-weight: 800;
      line-height: 1.2;
    }
    .score {
      display: grid;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
    }
    .score strong {
      color: var(--ink);
    }
    .tiny {
      font-size: 12px;
      color: var(--muted);
    }
    @media (max-width: 980px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .chat-panel {
        border-right: 0;
        border-bottom: 1px solid var(--line);
      }
    }
    @media (max-width: 640px) {
      main { padding: 12px; }
      .shell {
        min-height: calc(100vh - 24px);
        border-radius: 22px;
      }
      .topbar,
      .chat-panel,
      .side-panel {
        padding: 16px;
      }
      .composer-row {
        grid-template-columns: 1fr;
      }
      .send {
        width: 100%;
        height: auto;
        padding: 12px 14px;
        border-radius: 999px;
      }
      .capsule {
        display: none;
      }
    }
  </style>
</head>
<body>
  <main>
    <section class="shell">
      <header class="topbar">
        <div class="brand">
          <div class="brand-mark" aria-hidden="true">
            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 34C17 17 35 12 54 16C47 20 43 26 42 31C46 31 51 33 56 39C47 40 42 43 38 48C36 42 31 39 24 39C20 39 15 37 9 34Z" fill="url(#sharkBody)"/>
              <path d="M27 22L34 13L37 24" fill="#A9DFFF"/>
              <path d="M42 28C46 26 50 26 55 28C51 30 48 33 46 36" fill="#0B6FB8"/>
              <circle cx="41" cy="24" r="2.2" fill="#0D2436"/>
              <path d="M31 33C34 35 38 36 43 35" stroke="#ffffff" stroke-width="2.4" stroke-linecap="round"/>
              <defs>
                <linearGradient id="sharkBody" x1="10" y1="16" x2="54" y2="48" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#67C7FF"/>
                  <stop offset="1" stop-color="#1187D9"/>
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div>
            <h1>Shark</h1>
            <p id="subtitle">Connecting to remote runtime...</p>
          </div>
        </div>
        <div class="capsule">
          <span>Turns</span>
          <strong id="turns">0</strong>
          <span class="tiny" id="runtimeBadge">Runtime pending</span>
        </div>
      </header>

      <section class="layout">
        <section class="chat-panel">
          <article class="summary-card">
            <div class="status-row">
              <span class="status-pill" id="loopStatus">Loop pending</span>
              <span class="chip" id="modeChip">Mode unknown</span>
              <span class="chip" id="storageChip">Storage unknown</span>
            </div>
            <h2 id="headline">Loading startup thesis...</h2>
            <p class="muted" id="summary">Waiting for Shark state.</p>
            <div class="meta-grid" id="meta"></div>
          </article>

          <section class="feed" id="events"></section>

          <div class="composer-wrap">
            <form class="composer" onsubmit="sendCommand(event)">
              <p class="composer-label">Steer Shark here. Slack instructions and Shark's Slack updates are mirrored into the same feed.</p>
              <div class="composer-row">
                <textarea id="command" placeholder="Steer Shark: focus on pricing, ship the landing page, message VCs, tighten onboarding..."></textarea>
                <button class="accent send" type="submit">Send</button>
              </div>
            </form>
          </div>
        </section>

        <aside class="side-panel">
          <article class="side-card">
            <div class="panel-title">Startup Thesis</div>
            <div id="thesis"></div>
          </article>

          <article class="side-card">
            <div class="panel-title">Execution Checklist</div>
            <div class="task-checklist" id="checklist"></div>
          </article>

          <article class="side-card">
            <div class="panel-title">Pending Work</div>
            <div class="task-list" id="tasks"></div>
          </article>

          <article class="side-card">
            <div class="panel-title">Providers</div>
            <div class="provider-list" id="providers"></div>
          </article>

          <article class="side-card">
            <div class="panel-title">Score</div>
            <div class="score" id="score"></div>
          </article>
        </aside>
      </section>
    </section>
  </main>
  <script src="./runtime-config.js"></script>
  <script src="./app.js"></script>
</body>
</html>
